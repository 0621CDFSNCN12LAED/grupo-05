<!DOCTYPE html>
<html lang="en">
    <head>
        <%- include("../partials/head") %>
        <title>Carrito</title>
    </head>
    <body>
        <%- include("../partials/header") %> <%-
        include("../partials/slide-show")%>
        <main id="main-content">
            <div class="box-position-relative padding-bottom">
                <!-- El padding bottom es para que el
                footer no pise a los botones y al total, 
                que estan en una pocicion absoluta-->
                <div class="flex justify-space-around" id="divCartMain">
                    <% if(productos == "") {%>
                        <script>
                            let div = document.querySelector("#divCartMain");
                            console.log(div)
                            div.classList.add("block"); 
                            div.classList.add("text-align-center");
                        </script>
                        <h2 class="block text-align-center">No hay productos en el carrito</h2>
                        <a href="/" class="block text-align-center">Volver a la p√°gina de inicio</a>
                    <% }else{ %> 
                    <% for (producto of productos) {%>
                    <a
                        href="/product/detail/<%=producto.product_id%>"
                        class="
                            flex
                            product
                            cartItem
                            align-center
                            justify-space-around
                            w-100
                            text-decoration-none
                            black-txt
                        "
                    >
                        <img class="product-img" src=<%= producto.product.img%> alt=<%= producto.title %> />
                        <div class="flex direction-column">
                            <h3><%= producto.product.title %></h3>
                            <p>$<%= toThousand(producto.product.price) %></p>
                            <p><%= producto.product.type.name %></p>
                            <p><%= producto.count %></p>
                        </div>
                        <div class="flex direction-column">
                            <input type="number" value="<%= producto.count %>" >
                        </div>
                    </a>
                    <% } %>
                    <% } %> 
                </div>
                <div
                    class="
                        flex
                        box-position-absolute
                        padding-top
                        align-center
                        w-100
                        justify-content-space-around
                    "
                >
                    <div class="flex-item">
                        <h2>Total: $<%= toThousand(totalPrice) %></h2>
                    </div>
                    <div class="flex cart-button-direction">
                        <div class="flex-item">
                            <button class="button-cart" type="submit">
                                Comprar
                            </button>
                        </div>
                        <div class="flex-item">
                            <button class="button-cart" type="button">
                                Vaciar el carrito
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </main>
        <%- include("../partials/footer") %>
    </body>
</html>
